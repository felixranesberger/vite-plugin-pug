import{join as c}from"node:path";import{compileFile as u}from"pug";import n from"picocolors";function f(r,s,t){return r.replace(/<pug.+?(file|src)="(.+?)".+?(locals="(.+?)")?.*?\/.*?>/gi,(e,l,i,p,o)=>(l==="file"&&t&&t.warn(`${n.red(`the ${n.bold("file")} attribute is deprecated,`)} ${n.cyan(`please include ${n.italic(i)} with ${n.bold("src")} instead`)}`),s(i,o?JSON.parse(decodeURIComponent(o)):{})))}function m(r,s){return{name:"vite-plugin-pug",handleHotUpdate({file:t,server:e}){t.endsWith(".pug")&&(e.config.logger.info(`${n.red("pug\u2019s not hot")} \u{1F32D} ${n.cyan(t)}`),e.ws.send({type:"full-reload"}))},transformIndexHtml:{transform(t,{server:e,filename:l}){return f(t,(i,p)=>{let o=g=>u(g,r)({...s,...p});if(typeof r?.localImports=="function"&&r.localImports(l)||r?.localImports){let g=l.replace(/(.*)[\\\/].*\.html$/,"$1"),a=c(g,i);return o(a)}return o(i)},e?.config.logger)}}}}export{m as default,f as pugs};
//# sourceMappingURL=index.js.map