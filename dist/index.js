import{join as a}from"node:path";import{compileFile as u}from"pug";import n from"picocolors";function f(e,g,t){return e.replace(/<pug.+?(file|src)="(.+?)".+?(locals="(.+?)")?.*?\/.*?>/gi,(r,l,i,p,o)=>(l==="file"&&t&&t.warn(`${n.red(`the ${n.bold("file")} attribute is deprecated,`)} ${n.cyan(`please include ${n.italic(i)} with ${n.bold("src")} instead`)}`),g(i,o?JSON.parse(decodeURIComponent(o)):{})))}function m(e,g){return{name:"vite-plugin-pug",handleHotUpdate({file:t,server:r}){t.endsWith(".pug")&&(r.config.logger.info(`${n.red("pug\u2019s not hot")} \u{1F32D} ${n.cyan(t)}`),r.ws.send({type:"full-reload"}))},transformIndexHtml(t,{server:r,filename:l}){return f(t,(i,p)=>{let o=s=>u(s,e)({...g,...p});if(typeof e?.localImports=="function"&&e.localImports(l)||e?.localImports){let s=l.replace(/(.*)[\\\/].*\.html$/,"$1"),c=a(s,i);return o(c)}return o(i)},r?.config.logger)}}}export{m as default,f as pugs};
//# sourceMappingURL=index.js.map